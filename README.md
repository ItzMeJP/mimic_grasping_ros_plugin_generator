# Mimic Grasping ROS Plugin Generator
<a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-nd/4.0/88x31.png" />

* [Description](#Description)
* [Prerequisites](#Prerequisites)
* [Installation](#Installation)
* [Usage](#Usage)


### <a name="Description"></a>1. Description

Ros package to build ROS depend plugins to [mimic_grasping_api](https://gitlab.inesctec.pt/CRIIS/mimicgrasping/mimic_grasping_api).

### <a name="Prerequisites"></a>2. Prerequisites

1. [ROS](http://wiki.ros.org/ROS/Installation)
2. [Catkin Tools](https://catkin-tools.readthedocs.io/en/latest/installing.html)
3. [Phoxi Camera](https://github.com/carlosmccosta/phoxi_camera)
4. [Photoneo Skill](https://gitlab.inesctec.pt/pmrebelo/photoneo_skill)
5. [Dynamic Robot Localization](https://github.com/carlosmccosta/dynamic_robot_localization)
6. [Object Recognition](https://github.com/carlosmccosta/object_recognition)
7. [Mimic Grasping API](https://gitlab.inesctec.pt/CRIIS/mimicgrasping/mimic_grasping_api)
8. [Mimic Grasping ROS Interface Package](https://gitlab.inesctec.pt/CRIIS/mimicgrasping/mimic_grasping_ros_interface_package)
9. [Plugin System Management](https://gitlab.inesctec.pt/CRIIS/mimicgrasping/plugin_system_management)
10. [Eigen3](https://eigen.tuxfamily.org/dox/)

### <a name="Installation"></a>3. Installation

Setup all prerequisites.

Clone the repository:
```
git clone https://gitlab.inesctec.pt/CRIIS/mimicgrasping/mimic_grasping_ros_plugin_generator
```
Compile the ROS package with [catkin tools](https://catkin-tools.readthedocs.io/en/latest/installing.html):

```
roscd mimic_grasping_ros_plugin_generator
catkin build
```

Install the package:
```
TODO
```
### <a name="Usage"></a>4. Usage

After the installation, the generated plugins will be placed at [plugins folder](./plugins). The supported plugins are:

1. **libobject_localization_ros**: Object recognition plugin fed by static cloud, i.e., static point cloud publication from memory. Useful for debug. Associated tester node: "raw_test".
2. **libphoxi_cam_object_localization_ros**: Object recognition plugin fed by [Photoneo Phoxi Camera](https://github.com/carlosmccosta/phoxi_camera). The input cloud is generated by the [Photoneo Action Skill Server](https://gitlab.inesctec.pt/pmrebelo/photoneo_skill). Associated tester node: "phoxi_cam_test".

To run a plugin, the loader package need to be in accordance with [Mimic Grasping API](https://gitlab.inesctec.pt/CRIIS/mimicgrasping/mimic_grasping_api) which  plugin system is based on [Plugin System Management](https://gitlab.inesctec.pt/CRIIS/mimicgrasping/plugin_system_management) API.

Once the shared plugin lib is loaded in run-time, it is necessary to call methods to load configurations (.JSON) and run the external executables. 
For examples, check [here](./src/examples). The initialization scripts and configurations JSON files, used in these cases are located at [Mimic Grasping API](https://gitlab.inesctec.pt/CRIIS/mimicgrasping/mimic_grasping_api). It uses the environment variable $MIMIC_GRASPING_SERVER_ROOT as reference.

### Testers 
Each plugin can be tested by running each plugin node tester. Bellow is presented the steps to each one:

##### **Raw tester**

Tester used to debug **libobject_localization_ros**.
To run, just:

```
rosrun mimic_grasping_ros_plugin_generator raw_test
```

#### Photoneo tester
Tester used to debug **libphoxi_cam_object_localization_ros**. To run, just:

```
rosrun mimic_grasping_ros_plugin_generator phoxi_cam_test
```




-----------------------------------------------------------------------------------------------------------------
<br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/">Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License</a>.
